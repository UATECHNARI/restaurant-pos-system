# ‚úÖ –ü–Ü–°–õ–Ø –ú–Ü–ì–†–ê–¶–Ü–á - –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

## üéâ –ú—ñ–≥—Ä–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø—ñ—à–Ω–æ!

–°—Ç–≤–æ—Ä–µ–Ω–æ:
- ‚úÖ 2 –∫–ª—ñ—î–Ω—Ç—ñ–≤ (ID: 1 –¥–ª—è admin@pizza.com, ID: 2 –¥–ª—è ua.technari@gmail.com)
- ‚úÖ –í—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–æ `client_id`

---

## üîÑ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:

### 1Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ backend

```powershell
# –ó—É–ø–∏–Ω–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π backend (Ctrl+C)
# –ü–æ—Ç—ñ–º –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–Ω–æ–≤—É:
cd D:\Work\Pizza\backend
npm run dev
```

### 2Ô∏è‚É£ –ü–µ—Ä–µ–ª–æ–≥—ñ–Ω–∏—Ç–∏—Å—å –≤ —Å–∏—Å—Ç–µ–º—ñ

**–í–ê–ñ–õ–ò–í–û:** –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–π—Ç–∏ —ñ –∑–∞–π—Ç–∏ –∑–Ω–æ–≤—É, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–æ–≤–∏–π JWT —Ç–æ–∫–µ–Ω –∑ `client_id`!

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:5175` (–∞–±–æ —ñ–Ω—à–∏–π –ø–æ—Ä—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É)
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–í–∏–π—Ç–∏" (—è–∫—â–æ –∑–∞—Ä–∞–∑ –∑–∞–ª–æ–≥—ñ–Ω–µ–Ω–∏–π)
3. –ó–∞–π—Ç–∏ –∑–Ω–æ–≤—É –∑ –≤–∞—à–∏–º–∏ –¥–∞–Ω–∏–º–∏:
   - Email: `admin@pizza.com` –∞–±–æ `ua.technari@gmail.com`
   - –ü–∞—Ä–æ–ª—å: –≤–∞—à –ø–∞—Ä–æ–ª—å

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:

### –ü—ñ—Å–ª—è –ø–µ—Ä–µ–ª–æ–≥—ñ–Ω—É:

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Å–æ–ª—å backend:**
   - –ú–∞—î –±—É—Ç–∏: `‚úÖ getClientId: User found, client_id = 1` (–∞–±–æ 2)
   - –ù–ï –º–∞—î –±—É—Ç–∏: `‚ö†Ô∏è client_id is null`

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**
   - –ú–∞—î –±—É—Ç–∏: `‚úÖ GET http://localhost:3001/api/products 200 (OK)`
   - –ù–ï –º–∞—î –±—É—Ç–∏: `‚ùå GET http://localhost:3001/api/products 403 (Forbidden)`

---

## üîç –Ø–∫—â–æ –≤—Å–µ —â–µ –ø–æ–º–∏–ª–∫–∞ 403:

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤ MySQL:

```sql
USE bar_kitchen_pos;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ —î client_id —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
SELECT id, email, role, client_id FROM users;

-- –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
-- +----+-------------------------+--------+-----------+
-- | id | email                   | role   | client_id |
-- +----+-------------------------+--------+-----------+
-- |  1 | admin@pizza.com         | admin  |         1 |
-- |  2 | ua.technari@gmail.com   | admin  |         2 |
-- |  3 | cashier@pizza.com       | cashier|         1 |
-- |  4 | kitchen@pizza.com       | kitchen|         1 |
-- |  5 | bar@pizza.com           | bar    |         1 |
-- +----+-------------------------+--------+-----------+
```

### –Ø–∫—â–æ client_id –≤—Å–µ —â–µ NULL:

–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é —â–µ —Ä–∞–∑:

```powershell
cd D:\Work\Pizza\backend
npm run migrate:users
```

---

## üí° –ü–æ—è—Å–Ω–µ–Ω–Ω—è:

–ü—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó:
- –ö–æ–∂–µ–Ω –∞–¥–º—ñ–Ω –º–∞—î —Å–≤—ñ–π –∫–ª—ñ—î–Ω—Ç (client_id)
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑ —Ä–æ–ª—è–º–∏ (kitchen, bar, cashier) –ø—Ä–∏–≤'—è–∑–∞–Ω—ñ –¥–æ –∫–ª—ñ—î–Ω—Ç–∞ –∞–¥–º—ñ–Ω–∞
- –ü—Ä–∏ –≤—Ö–æ–¥—ñ —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä—É—î JWT —Ç–æ–∫–µ–Ω –∑ `client_id`
- –í—Å—ñ –∑–∞–ø–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä—É—é—Ç—å—Å—è –ø–æ `client_id`

**–¢–æ–º—É –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–ª–æ–≥—ñ–Ω–∏—Ç–∏—Å—å** - —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–æ–≤–∏–π JWT —Ç–æ–∫–µ–Ω –∑ `client_id`!

---

## üöÄ –Ø–∫—â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î:

–ü—ñ—Å–ª—è –ø–µ—Ä–µ–ª–æ–≥—ñ–Ω—É –≤–∏ –∑–º–æ–∂–µ—Ç–µ:
- ‚úÖ –î–æ–¥–∞–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏ (–±—É–¥—É—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—å –∑ –≤–∞—à–∏–º `client_id`)
- ‚úÖ –î–æ–¥–∞–≤–∞—Ç–∏ —Å—Ç–æ–ª–∏ (–±—É–¥—É—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—å –∑ –≤–∞—à–∏–º `client_id`)
- ‚úÖ –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (–±—É–¥—É—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—å –∑ –≤–∞—à–∏–º `client_id`)
- ‚úÖ –ö–æ–∂–µ–Ω –∫–ª—ñ—î–Ω—Ç (–∞–¥–º—ñ–Ω) –º–∞—î —Å–≤–æ—é —ñ–∑–æ–ª—å–æ–≤–∞–Ω—É –±–∞–∑—É –¥–∞–Ω–∏—Ö

---

**–°—Ç–≤–æ—Ä–µ–Ω–æ:** `–ü–Ü–°–õ–Ø_–ú–Ü–ì–†–ê–¶–Ü–á.md`


