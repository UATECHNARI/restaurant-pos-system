# üö® –í–ê–ñ–õ–ò–í–û! –í–ò–ö–û–ù–ê–ô–¢–ï –°–ü–û–ß–ê–¢–ö–£!

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:

```
Error: Table 'bar_kitchen_pos.clients' doesn't exist
```

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–∞–±–ª–∏—Ü—è `clients` –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö.

---

## ‚úÖ –†–Ü–®–ï–ù–ù–Ø (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ!):

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –®–≤–∏–¥–∫–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è (—Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ clients)

```powershell
cd D:\Work\Pizza\backend
mysql -u root -p < create-clients-table-only.sql
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ü–æ–≤–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

```powershell
cd D:\Work\Pizza\backend
mysql -u root -p < add-multi-tenancy.sql
```

### –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è SQL —Å–∫—Ä–∏–ø—Ç—É:

```powershell
# 1. –ú—ñ–≥—Ä—É–≤–∞—Ç–∏ —ñ—Å–Ω—É—é—á–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
npm run migrate:users

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ backend
npm run dev
```

---

## üìã –Ø–ö –í–ò–ö–û–ù–ê–¢–ò SQL –°–ö–†–ò–ü–¢:

### –í–∞—Ä—ñ–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ MySQL Workbench

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ MySQL Workbench
2. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö `bar_kitchen_pos`
3. –§–∞–π–ª ‚Üí Open SQL Script
4. –í–∏–±–µ—Ä—ñ—Ç—å `create-clients-table-only.sql` –∞–±–æ `add-multi-tenancy.sql`
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å F9 (Execute) –∞–±–æ –∫–Ω–æ–ø–∫—É "Execute"

### –í–∞—Ä—ñ–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω–∏–π —Ä—è–¥–æ–∫

```powershell
# –í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å MySQL –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ
mysql -u root -p < create-clients-table-only.sql
```

### –í–∞—Ä—ñ–∞–Ω—Ç –í: –í—Ä—É—á–Ω—É –≤ MySQL

```sql
USE bar_kitchen_pos;

-- –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é clients
CREATE TABLE IF NOT EXISTS clients (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    phone VARCHAR(20) NULL,
    address TEXT NULL,
    status ENUM('active', 'suspended', 'inactive') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_email (email),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- –î–æ–¥–∞—Ç–∏ client_id –≤ users (—è–∫—â–æ —â–µ –Ω–µ–º–∞—î)
ALTER TABLE users 
ADD COLUMN IF NOT EXISTS client_id INT NULL AFTER id;

-- –î–æ–¥–∞—Ç–∏ —ñ–Ω–¥–µ–∫—Å
ALTER TABLE users 
ADD INDEX IF NOT EXISTS idx_client_id (client_id);

-- –î–æ–¥–∞—Ç–∏ foreign key
ALTER TABLE users 
ADD CONSTRAINT fk_users_client 
FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE;
```

---

## üîç –ü–ï–†–ï–í–Ü–†–ö–ê:

### –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è SQL —Å–∫—Ä–∏–ø—Ç—É –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:

```sql
-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ —ñ—Å–Ω—É—î —Ç–∞–±–ª–∏—Ü—è clients
SHOW TABLES LIKE 'clients';

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ñ
DESCRIBE clients;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ —î client_id –≤ users
DESCRIBE users;
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –¢–∞–±–ª–∏—Ü—è `clients` —ñ—Å–Ω—É—î
- ‚úÖ –ö–æ–ª–æ–Ω–∫–∞ `client_id` —î –≤ —Ç–∞–±–ª–∏—Ü—ñ `users`

---

## ‚úÖ –ü–Ü–°–õ–Ø –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø:

1. ‚úÖ SQL —Å–∫—Ä–∏–ø—Ç –≤–∏–∫–æ–Ω–∞–Ω–æ
2. ‚úÖ –¢–∞–±–ª–∏—Ü—è `clients` —Å—Ç–≤–æ—Ä–µ–Ω–∞
3. ‚úÖ –ö–æ–ª–æ–Ω–∫–∞ `client_id` –¥–æ–¥–∞–Ω–∞ –≤ `users`
4. ‚úÖ –ú—ñ–≥—Ä–∞—Ü—ñ—è –≤–∏–∫–æ–Ω–∞–Ω–∞ (`npm run migrate:users`)
5. ‚úÖ Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ
6. ‚úÖ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î
7. ‚úÖ –¢–æ–≤–∞—Ä–∏ —Ç–∞ —Å—Ç–æ–ª–∏ –¥–æ–¥–∞—é—Ç—å—Å—è

---

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:

**–ë–ï–ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è SQL —Å–∫—Ä–∏–ø—Ç—É —Å–∏—Å—Ç–µ–º–∞ –ù–ï –ü–†–ê–¶–Æ–í–ê–¢–ò–ú–ï!**

–í–∏–∫–æ–Ω–∞–π—Ç–µ –æ–¥–∏–Ω –∑ SQL —Å–∫—Ä–∏–ø—Ç—ñ–≤:
- `create-clients-table-only.sql` - —à–≤–∏–¥–∫–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ clients
- `add-multi-tenancy.sql` - –ø–æ–≤–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ë–î –∑ –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω—ñ—Å—Ç—é

---

**–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—É - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å backend —Ç–∞ —Å–ø—Ä–æ–±—É–π—Ç–µ –∑–Ω–æ–≤—É!**


